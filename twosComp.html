<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="EN" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/xml; charset=utf-8" />
    <title>twosComp.html</title>
    <script type = "text/javascript">
      //Twos Complement Practice Tool
      //Andy Harris, 08/07
      //For CSCI 230
      
      //globals for binary and decimal values
      var bin = "";
      var dec = 0;
  
      function getVals(){
        //generate binary and decimal values
        bin = "";
        dec = 0;
        for (i = 0; i < 8; i++){
          //get a random number 0 or 1
          c = Math.floor(Math.random() * 2);
          //figure out where in the string I am
          place = 7 - i;
          //calculate 2^place
          power = Math.pow(2,place);
          //if it's the leftmost digit,
          //multiply the current digit (0 or 1) by the current power
          //and then by negative 1 to make it a negative number
          
          if (place == 7){
            val = power * c * -1;
          } else {
            //if its any other digit, just multipy the current digit 
            //by the current power
          
            val = power * c;
          } // end if
          //add the current value to the decimal value
          dec += val;
          //concatenate the current binary value to the binary string 
          bin += "" + c;
        }
      } // end function  
      
      function getBin(){
        //The user wants a binary value. 
        getVals();
        txtBin = document.getElementById("txtBin");
        txtDec = document.getElementById("txtDec");
        txtBin.value = bin;
        txtDec.value = "";
      } // end function        

      function getDec(){
        //The user wants a decimal value
        getVals();
        txtBin = document.getElementById("txtBin");
        txtDec = document.getElementById("txtDec");
        txtBin.value = "";
        txtDec.value = dec;
      } // end function   
      
      function checkAns(){
        //get current form contents
        txtBin = document.getElementById("txtBin");
        txtDec = document.getElementById("txtDec");
        
        //user is correct if both values are correct
        correct = true;
        if (txtBin.value != bin){
          correct = false;          
        } // end if
        if (txtDec.value != dec.toString()){
          correct = false;
        } // end if
        
        if (correct){
          alert("correct");
        } else {
          alert("wrongo");
        } // end if
      } // end function

    </script>
  </head>

  <body onload = "getBin()">
    
    <h1>Two's Complement checker</h1>
    <table>
      <tr>
        <td>Twos Complement Value</td>
        <td>
          <input type = "text"
                 id = "txtBin" />
        </td>
      </tr>
      
      <tr>    
        <td>Base Ten Value</td>
        <td>
          <input type = "text"
                 id = "txtDec" />
        </td>
      </tr>
      
      <tr>
        <td>
          <input type = "button"
                 value = "random 2's Comp"
                 onclick = "getBin()" />
        </td>
        <td>
          <input type = "button"
                 value = "random base 10"
                 onclick = "getDec()" />
        </td>
      </tr>
      
      <tr>
        <td colspan = "2" style = "text-align: center">
          <input type = "button"
                 value = "check answer"
                 onclick = "checkAns()" /> 
        </td>
      </tr>
      
    </table>
    
    <h2>Using this program:</h2>
    <p>
      Use this tool to practice 8-bit two's complement notation.
      You can ask for a randomly generated value in base 2 (2's complement) 
      or in base 10 (which will generate random numbers between -128 and
      127)
    </p>
    
    <h2>Selecting a problem</h2>
    <p>
      Click the "random 2's Comp" button to get a randomly generated 
      two's complement number. You will be expected to enter the 
      corresponding base ten integer in the other field.  If you prefer
      to start with a decimal integer, press  the "random Base 10" button
      instead. You should be comfortable with both types of conversions.
    </p>
    
    <h2>Checking your work</h2>
    <p>
      Once you've gotten an answer, click on the "check answer" button to
      see if you got it right. If you didn't get it correct, try again...
    </p>
    
    <h2>About the code</h2>
    <p>
      This program is written in JavaScript, so you can use the "view source"
      command to see what's going on.  Unfortunately, JavaScript doesn't 
      have a twos complement feature built in, so I had to do it myself.
      I generated a random binary string, and as I was building the value,
      I determined the effect each digit would have on the overall value.
    </p>
    
    <p>
      This program is still a little easy to be considered a suitable
      final project for this class.
    </p>
    
  </body>
</html>
